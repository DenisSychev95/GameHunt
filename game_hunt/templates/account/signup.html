{% extends "base.html" %}
{% load static %}

{% block title %}GameHunt — Регистрация{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
{% endblock %}

{% block content %}
<section class="ce-wrap">
    <div class="ce-top">
            <a class="gd-back" href="{% url 'homepage' %}">
                <span class="ui-icon ui-icon-arrow-left" aria-hidden="true"></span>
                <span>На главную</span>
            </a>
        </div>
    <div class="ce-card">



        <h2 class="gd-section-title center">Регистрация</h2>

{% if form.errors %}
    <div class="gd-form-errors">
      <p class="gd-form-errors-title"><strong>Ошибка заполнения формы</strong></p>
    </div>
  {% endif %}

        <form method="post" action="{% url 'account_signup' %}" class="ce-form" novalidate>
            {% csrf_token %}

            <div class="gd-formset-grid">
                {% for field in form %}
                <div class="gd-field{% if field.name == 'password1' or field.name == 'password2' %} gd-pass{% endif %}">
                    {{ field.label_tag }}

                    {# кастомный input только для phone, чтобы гарантировать id и placeholder #}
                    {% if field.name == "password1" %}


                    <div class="gd-pass-wrap">
                        {{ field }}
                        <button type="button" class="gd-pass-toggle" aria-label="Показать пароль" data-toggle-pass>
                            <span class="gd-eye gd-eye-open" aria-hidden="true"></span>
                            <span class="gd-eye gd-eye-off" aria-hidden="true"></span>
                        </button>
                    </div>
                    {% elif field.name == "password2" %}


                    <div class="gd-pass-wrap">
                        {{ field }}
                        <button type="button" class="gd-pass-toggle" aria-label="Показать пароль" data-toggle-pass>
                            <span class="gd-eye gd-eye-open" aria-hidden="true"></span>
                            <span class="gd-eye gd-eye-off" aria-hidden="true"></span>
                        </button>
                    </div>


                    {% elif field.name == "birth_date" %}
                    <input
                            type="text"
                            name="{{ field.name }}"
                            id="id_birth_date"
                            value="{{ field.value|default:'' }}"
                            class="gd-field-control gd-wide"
                            placeholder="дд.мм.гггг"
                            inputmode="numeric"
                            autocomplete="bday"
                    >
                    {% elif field.name == "phone" %}
                    <input
                            type="text"
                            name="{{ field.name }}"
                            id="{{ field.id_for_label }}"
                            value="{{ field.value|default:'' }}"
                            class="gd-field-control gd-wide"
                            placeholder="7(999)-999-99-99"

                    >

                    {% else %}
                    {{ field }}
                    {% endif %}

                    {% if field.help_text %}
                    <div class="gd-field-help">{{ field.help_text }}</div>
                    {% endif %}

                    {% if field.errors %}
                    <div class="gd-field-error">{{ field.errors.0|striptags }}</div>
                    {% else %}
                    <div class="gd-field-error"></div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>

            <div class="ce-actions">
                <button type="submit" class="gd-back save mini-button">Зарегистрироваться</button>
            </div>

            <div class="auth-split">
                <div class="auth-split-left">
                    <div class="auth-hint">Уже есть аккаунт?</div>
                    <a class="gd-back small" href="{% url 'account_login' %}">Войти</a>
                </div>

                <div class="auth-split-right">
                    <div class="auth-hint">Нужна помощь?</div>
                    <a class="gd-back small" href="{% url 'contacts' %}">Контакты</a>
                </div>
            </div>

        </form>

    </div>
</section>
{% endblock %}

{% block page_js %}
<script src="https://unpkg.com/imask"></script>
<script src="{% static 'js/signup.js' %}"></script>
{% endblock %}