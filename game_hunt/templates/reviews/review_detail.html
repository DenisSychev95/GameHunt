{% extends "base.html" %}
{% block title %}GameHunt ‚Äî {{ review.title }} ‚Äî –û–±–∑–æ—Ä{% endblock %}

{% block content %}
<section style="max-width: 900px; margin: 0 auto;">

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
  <p style="margin-bottom: 10px;">
    <a href="{% url 'review_list' %}" style="color: #9ca3af;">‚Üê –í—Å–µ –æ–±–∑–æ—Ä—ã</a>
    ¬∑
    <a href="{% url 'game_detail' slug=review.game.slug %}" style="color: #9ca3af;">
      {{ review.game.title }}
    </a>
  </p>

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + –∫–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∞ -->
  <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:12px;">
    <div>
      <h2 style="color:#f97316; margin: 0 0 6px;">{{ review.title }}</h2>

      <p style="font-size:14px; color:#9ca3af; margin: 0;">
        –ê–≤—Ç–æ—Ä: {{ review.author.username }}
        ¬∑ –û—Ü–µ–Ω–∫–∞: <strong style="color:#e5e7eb;">{{ review.rating }}/10</strong>
        ¬∑ {{ review.created_at|date:"d.m.Y H:i" }}
      </p>
    </div>

    {% if user.is_authenticated and user == review.author %}
      <div style="display:flex; gap:10px; margin-top: 2px;">
        <a href="{% url 'review_edit' review.pk %}" style="color:#facc15; text-decoration:none;">
          ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        </a>
        <a href="{% url 'review_delete' review.pk %}" style="color:#ef4444; text-decoration:none;">
          üóë –£–¥–∞–ª–∏—Ç—å
        </a>
      </div>
    {% endif %}
  </div>

  <!-- TL;DR -->
  {% if review.summary %}
    <div style="margin-top: 16px; padding: 12px; border: 1px solid #374151; border-radius: 10px;">
      <h3 style="margin:0 0 8px; color:#e5e7eb;">TL;DR</h3>
      <div style="color:#e5e7eb; line-height:1.6;">
        {{ review.summary|linebreaks }}
      </div>
    </div>
  {% endif %}

  <!-- –ì–∞–ª–µ—Ä–µ—è -->
  {% if review.images.all %}
    <h3 style="margin-top: 18px; margin-bottom: 10px; color:#e5e7eb;">–°–∫—Ä–∏–Ω—à–æ—Ç—ã</h3>
    <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr)); gap:12px;">
      {% for img in review.images.all %}
        <figure style="border:1px solid #374151; border-radius:10px; padding:10px; margin:0;">
          <img src="{{ img.image.url }}"
               alt=""
               style="width:100%; height:160px; object-fit:cover; border-radius:8px;">
          {% if img.caption %}
            <figcaption style="margin-top:6px; color:#9ca3af; font-size:13px;">
              {{ img.caption }}
            </figcaption>
          {% endif %}
        </figure>
      {% endfor %}
    </div>
  {% endif %}

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç -->
  <div style="margin-top: 18px;">
    <h3 style="margin:0 0 10px; color:#e5e7eb;">–û–±–∑–æ—Ä</h3>
    <div style="font-size:15px; line-height:1.7; color:#e5e7eb;">
      {{ review.text|linebreaks }}
    </div>
  </div>

  <!-- –ü–ª—é—Å—ã / –ú–∏–Ω—É—Å—ã -->
  <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 18px;">
    {% if review.pros %}
      <div style="border:1px solid #374151; border-radius:10px; padding:12px;">
        <h3 style="margin:0 0 8px; color:#22c55e;">–ü–ª—é—Å—ã</h3>
        <div style="color:#e5e7eb; line-height:1.6;">
          {{ review.pros|linebreaks }}
        </div>
      </div>
    {% endif %}

    {% if review.cons %}
      <div style="border:1px solid #374151; border-radius:10px; padding:12px;">
        <h3 style="margin:0 0 8px; color:#ef4444;">–ú–∏–Ω—É—Å—ã</h3>
        <div style="color:#e5e7eb; line-height:1.6;">
          {{ review.cons|linebreaks }}
        </div>
      </div>
    {% endif %}
  </div>

  <!-- –ò—Ç–æ–≥ -->
  {% if review.conclusion %}
    <div style="margin-top: 18px; padding: 12px; border: 1px solid #374151; border-radius: 10px;">
      <h3 style="margin:0 0 8px; color:#e5e7eb;">–ò—Ç–æ–≥</h3>
      <div style="color:#e5e7eb; line-height:1.6;">
        {{ review.conclusion|linebreaks }}
      </div>
    </div>
  {% endif %}

  <!-- –í–∏–¥–µ–æ -->
  {% if review.video_url %}
    <div style="margin-top: 18px; padding: 12px; border: 1px solid #374151; border-radius: 10px;">
      <h3 style="margin:0 0 8px; color:#e5e7eb;">–í–∏–¥–µ–æ</h3>
      <p style="margin:0;">
        <a href="{{ review.video_url }}" target="_blank" rel="noopener" style="color:#f97316;">
          –û—Ç–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ-–æ–±–∑–æ—Ä
        </a>
      </p>
    </div>
  {% endif %}

</section>
{% endblock %}