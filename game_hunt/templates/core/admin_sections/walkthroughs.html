<div class="admin-head admin-head--right">
  <a class="gd-back" href="{% url 'admin_walkthrough_create' %}">+ Добавить прохождение</a>
</div>

<div class="admin-scroll">
  {% if walkthroughs %}
    <table class="admin-table">
      <thead>
      <tr>
        <th>Название</th>
        <th>Игра</th>
        <th>Автор</th>
        <th>Обновлено</th>
        <th>Статус</th>
        <th class="admin-actions-col">Действия</th>
      </tr>
      </thead>
      <tbody>
      {% for w in walkthroughs %}
        <tr>
          <td><a class="admin-link" href="{% url 'walkthrough_detail' w.slug %}" target="_blank">{{ w.title }}</a></td>
          <td>{{ w.game.title }}</td>
          <td>
            <a class="admin-link" href="{% url 'profile-view' w.author.profile.id %}" target="_blank">
              {{ w.author.profile.nickname|default:w.author.username }}
            </a>
          </td>
          <td>{{ w.updated_at|date:"d.m.Y H:i" }}</td>
          <td>
            {% if w.is_published %}<span class="st-ok">опубликовано</span>
            {% else %}<span class="st-warn">на модерации</span>{% endif %}
          </td>
          <td class="admin-actions">
            {% with next_url=request.get_full_path|urlencode %}
              <a class="admin-ico" href="{% url 'admin_walkthrough_edit' w.slug %}?next={{ next_url }}" title="Редактировать">
                <svg class="gd-ico gd-ico-edit" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill="currentColor"
                        d="M3 17.25V21h3.75L17.8 9.95l-3.75-3.75L3 17.25zm18-11.5
                           a1 1 0 0 0 0-1.41l-1.59-1.59
                           a1 1 0 0 0-1.41 0l-1.83 1.83
                           3.75 3.75L21 5.75z"/>
                </svg>
              </a>

              <a class="admin-ico" href="{% url 'walkthrough_delete' w.slug %}?next={{ next_url }}" title="Снять с публикации">
                <svg class="gd-ico gd-ico-trash" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill="currentColor"
                        d="M6 7h12l-1 13H7L6 7zm3-3h6l1 2H8l1-2z"/>
                </svg>
              </a>
            {% endwith %}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="admin-empty">Нет прохождений.</div>
  {% endif %}
</div>